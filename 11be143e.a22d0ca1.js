(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{138:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));var a=n(2),o=n(10),i=(n(0),n(175)),r={title:"Concepts"},l={id:"concepts",isDocsHomePage:!1,title:"Concepts",description:"Shipula tries to create an environment as close to your local programming world as possible, but on the cloud.",source:"@site/docs/concepts.mdx",permalink:"/shipula/docs/concepts",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/concepts.mdx",sidebar:"someSidebar",previous:{title:"Getting Started",permalink:"/shipula/docs/"},next:{title:"backup",permalink:"/shipula/docs/commands/backup"}},c=[{value:"Clustering and Load Balancing",id:"clustering-and-load-balancing",children:[{value:"Files",id:"files",children:[]},{value:"Logs",id:"logs",children:[]}]},{value:"Apps and Stacks",id:"apps-and-stacks",children:[{value:"Apps",id:"apps",children:[]},{value:"Stacks",id:"stacks",children:[]},{value:"Prod/Stage/Test/Dev",id:"prodstagetestdev",children:[]}]},{value:"Deployment",id:"deployment",children:[{value:"Builds",id:"builds",children:[]},{value:"Containers",id:"containers",children:[]},{value:"Hot, Rolling Updates",id:"hot-rolling-updates",children:[]}]}],s={rightToc:c};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Shipula tries to create an environment as close to your local programming world as possible, but on the cloud."),Object(i.b)("h2",{id:"clustering-and-load-balancing"},"Clustering and Load Balancing"),Object(i.b)("p",null,"One of the big shocks you get when you go to the cloud is -- having multiple copies of your App running at once, on different machines, virtual machines, or containers. You do this to scale, and you do this for resilience to keep on running if a little bit of your app crashes or is reclaimed by your cloud provider."),Object(i.b)("p",null,"Dealing with this is the ",Object(i.b)("strong",{parentName:"p"},"big leap")," from working locally."),Object(i.b)("h3",{id:"files"},"Files"),Object(i.b)("p",null,"Locally -- you can just write to your disk, files, yaml, json, sqlite -- all just works. On the cloud, by default your find that while you might have a local disk, it's isn't ",Object(i.b)("strong",{parentName:"p"},"a")," local disk, it's a disk per server/virtual machine/container."),Object(i.b)("p",null,"Shipula deals with this by setting up a shared file system that you can always reach at ",Object(i.b)("inlineCode",{parentName:"p"},"/var/data"),". Store files, have fun."),Object(i.b)("h3",{id:"logs"},"Logs"),Object(i.b)("p",null,"Multiple running copies means multiple logs streaming from multiple machines. Locally -- you just start your process and watch the log go by, or ",Object(i.b)("inlineCode",{parentName:"p"},"> file")," or ",Object(i.b)("inlineCode",{parentName:"p"},"| less")," or some other tool to let you search and grep."),Object(i.b)("p",null,"In most hosted cloud setups, pretty complex log search engines are the norm. They are kinda cool -- but they don't have the immediacy of seeing the log go by and ",Object(i.b)("inlineCode",{parentName:"p"},"grep"),"."),Object(i.b)("p",null,"Shipula deals with this by setting up cloud hosted log search ",Object(i.b)("em",{parentName:"p"},"and")," real time log streaming. The real time logs are the combined logs of each of the runninig copies of you app."),Object(i.b)("h2",{id:"apps-and-stacks"},"Apps and Stacks"),Object(i.b)("h3",{id:"apps"},"Apps"),Object(i.b)("p",null,"Your server is an App in Shipula."),Object(i.b)("p",null,"An App has a few required characteristics:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"It needs to be node, with a package.json, the App name is the package name"),Object(i.b)("li",{parentName:"ul"},"It needs to have its ",Object(i.b)("inlineCode",{parentName:"li"},"dependencies")," and ",Object(i.b)("inlineCode",{parentName:"li"},"devDependencies")," correct",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"Easy way to tell -- make a new directoy, clone from git ",Object(i.b)("inlineCode",{parentName:"li"},"npm install")," or ",Object(i.b)("inlineCode",{parentName:"li"},"yarn")," -- then start"))),Object(i.b)("li",{parentName:"ul"},"It needs to have a start script, what you do with ",Object(i.b)("inlineCode",{parentName:"li"},"npm start")," or ",Object(i.b)("inlineCode",{parentName:"li"},"yarn start")),Object(i.b)("li",{parentName:"ul"},"It needs to listen on a port that can be set by the environment variable ",Object(i.b)("inlineCode",{parentName:"li"},"${PORT}"))),Object(i.b)("h3",{id:"stacks"},"Stacks"),Object(i.b)("p",null,"A Stack is an end to end copy of your App, you can have as many Stacks of your App as you like."),Object(i.b)("h3",{id:"prodstagetestdev"},"Prod/Stage/Test/Dev"),Object(i.b)("p",null,"It's really common to need multiple copies of your app. Setting up multiple copies can be ",Object(i.b)("em",{parentName:"p"},"work")," -- depending on which cloud tools you use, it can be as much work each time. And deploying to each copy can be work."),Object(i.b)("p",null,"Shipula deals with this by letting you set up multiple Stacks of your App.\nEach Stack is a complete, isolated copy.\nMake as many as you like, you just ",Object(i.b)("inlineCode",{parentName:"p"},"npx shipula --stack stackName deploy appName"),"."),Object(i.b)("h2",{id:"deployment"},"Deployment"),Object(i.b)("p",null,"A load balanced cloud app has multiple copies -- and that means deploying multiple copies."),Object(i.b)("p",null,"And coordinaing those deployments, which can be confusing and hard to keep track of which server/virtual machine/container has which code."),Object(i.b)("p",null,"Shipula makes this automatic."),Object(i.b)("h3",{id:"builds"},"Builds"),Object(i.b)("p",null,"Shipula will build for you, pulling in dependencies from your package.json as well as creating a cloud ready copy of your App.\nYou don't need to set up a separate build server, or even run a separate build."),Object(i.b)("h3",{id:"containers"},"Containers"),Object(i.b)("p",null,"Shipula uses containers, it's currently the most efficient method of deployment.\nWhat Shipula doesn't do is expect you to learn containers.\nShipula uses ","[Docker]"," to create container images, and stores those images in your own private container registry, but you don't have to create a Dockerfile, or learn Kubernetes, or even ",Object(i.b)("em",{parentName:"p"},"run")," Docker containers on your machine."),Object(i.b)("h3",{id:"hot-rolling-updates"},"Hot, Rolling Updates"),Object(i.b)("p",null,"Shipula adopts a hot rolling update strategy, making new copies of your app with the new version, and turning down old copies as their web requests end.\nIn practice, this means -- you just ",Object(i.b)("inlineCode",{parentName:"p"},"npx shipula deploy")," and shipula will figure it out for you.\nIf you have ever done this by hand, you'll appreaciate it."))}p.isMDXComponent=!0},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),p=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=p(n),b=a,h=u["".concat(r,".").concat(b)]||u[b]||d[b]||i;return n?o.a.createElement(h,l(l({ref:t},s),{},{components:n})):o.a.createElement(h,l({ref:t},s))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var s=2;s<i;s++)r[s]=n[s];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);